meta {
  name: "Create Vehicle Type - Validation Error"
  type: "http"
  seq: 2
}

post {
  url: "{{base_url}}/vehicle/types"
  body: {
    type: "json"
    json: {
      "type_name": "",
      "base_price": -5.00
    }
  }
  headers: {
    Content-Type: "application/json"
  }
}

tests {
  test("Should return validation error", function() {
    expect(response.status).to.equal(422);
    expect(response.body).to.have.property("status_name");
    expect(response.body.status_name).to.equal("unprocessable_content");
    expect(response.body).to.have.property("messages");
    expect(response.body.messages).to.be.an("array");
  });
}

docs {
  description: "Tests validation error handling for invalid vehicle type data"
  examples: [
    {
      request: {
        body: {
          type_name: "",
          base_price: -5.00
        }
      },
      response: {
        status: 422,
        body: {
          status_name: "unprocessable_content",
          status: 422,
          messages: ["type_name can't be blank", "base_price must be greater than 0"],
          code: "Errors::ValidationError",
          title: "Validation failed for vehicle type creation",
          server: "api"
        }
      }
    }
  ]
}
